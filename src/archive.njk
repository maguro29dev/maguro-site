---
layout: base.njk
title: 過去の企画アーカイブ
header_title: 過去の企画アーカイブ
header_subtitle: "@ゲームまぐにぃ / これまでの企画を振り返る場所"
permalink: /archive/
pageStyles: |
    <style>
        .section-title { font-family: 'Roboto', sans-serif; font-weight: 900; font-size: 2.25rem; color: #333; text-align: center; margin-bottom: 1rem; border-bottom: 3px solid #6a994e; padding-bottom: 0.75rem; }
        .archive-card { background-color: white; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); padding: 1.5rem; transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .archive-card:hover { transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); }
        .archive-card-title { color: #6a994e; font-weight: 700; font-size: 1.5rem; }
        .archive-card-date { color: #718096; font-size: 0.9rem; margin-bottom: 1rem; }
        .archive-card-description { color: #4a5568; }
        .sort-buttons { display: flex; justify-content: center; gap: 1rem; margin-bottom: 2rem; }
        .sort-btn { background-color: #e2e8f0; color: #4a5568; font-weight: bold; padding: 0.5rem 1rem; border-radius: 9999px; cursor: pointer; transition: all 0.2s; border: 2px solid transparent; }
        .sort-btn:hover { background-color: #cbd5e0; }
        .sort-btn.active { background-color: #6a994e; color: white; border-color: #588142; }
    </style>
---
<div class="max-w-7xl mx-auto p-4 sm:p-6">
    <section class="mb-12 mt-8">
        <h2 class="section-title">📜 過去の企画一覧 📜</h2>
        
        <div class="sort-buttons mt-8">
            <button id="sort-newest" class="sort-btn active">新しい順</button>
            <button id="sort-oldest" class="sort-btn">古い順</button>
        </div>

        <div id="archive-list" class="space-y-6">
            {%- for plan in siteContent.archivedPlans | sortByDate -%}
            <div class="archive-card" data-date="{{ plan.sys.createdAt }}">
                <p class="archive-card-date">{{ plan.fields.date }}</p>
                <h3 class="archive-card-title">{{ plan.fields.title }}</h3>
                <div class="archive-card-description prose max-w-none mt-4">
                    {{ plan.fields.description | markdownToHtml | safe }}
                </div>
            </div>
            {%- endfor -%}
        </div>
    </section>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const sortNewestBtn = document.getElementById('sort-newest');
    const sortOldestBtn = document.getElementById('sort-oldest');
    const archiveList = document.getElementById('archive-list');

    if (sortNewestBtn && sortOldestBtn && archiveList) {
        const sortPlans = (order) => {
            const plans = Array.from(archiveList.children);
            plans.sort((a, b) => {
                const dateA = new Date(a.dataset.date);
                const dateB = new Date(b.dataset.date);
                return order === 'newest' ? dateB - dateA : dateA - dateB;
            });
            plans.forEach(plan => archiveList.appendChild(plan));
        };

        sortNewestBtn.addEventListener('click', () => {
            sortPlans('newest');
            sortNewestBtn.classList.add('active');
            sortOldestBtn.classList.remove('active');
        });

        sortOldestBtn.addEventListener('click', () => {
            sortPlans('oldest');
            sortOldestBtn.classList.add('active');
            sortNewestBtn.classList.remove('active');
        });

        // 初期表示は新しい順にソート
        sortPlans('newest');
    }
});
</script>